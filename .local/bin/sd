#!/usr/bin/env bash

full_path="~/.sd"

help_mode=0

if [ "$1" == "help" ]
then
    help_mode=1
    shift
fi

for arg in "$@"
do
    full_path+="/$arg"
done

full_path="$(eval echo "$full_path")"

if [[ -d "$full_path" ]]
then
    echo "The provided script path is incomplete."
    exit
fi

if [[ ! -f "$full_path" ]]
then
    echo "The provided script does not exist."
    exit
fi

if [ $help_mode -eq 1 ]
then
    help_path="$full_path.help"
    if [[ -f "$help_path" ]]
    then
        cat "$help_path"
    else
        echo "No help is available for this script."
    fi
else
    exec "$full_path"
fi
